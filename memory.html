<!DOCTYPE html>
<html lang="ko">
<head>   
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Blue Lam - memory</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="glitch.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🌊</text></svg>">
</head>
<body>
  <nav class="navbar">
    <a href="index.html" class="nav-logo glitch-text" data-text="BLUE LAM">BLUE LAM</a>
    <div class="nav-controls">
      <div class="nav-time" id="current-datetime"></div>
      <div class="nav-danger-level" id="danger-level">MEMORY: FRAGMENTED</div>
    </div>
  </nav>

  <div class="side-nav">
    <a href="#memory-input" class="side-nav-item">01. 기억 입력</a>
    <a href="#memory-distortion" class="side-nav-item">02. 기억 왜곡</a>
    <a href="#memory-extraction" class="side-nav-item">03. 기억 추출</a>
    <a href="#memory-synthesis" class="side-nav-item">04. 기억 재구성</a>
  </div>

  <div class="container">
    <section id="memory-input" class="interactive-section">
      <div class="glitch-terminal">
        <input type="text" id="memory-input-field" placeholder="기억을 입력하세요...">
        <button id="memory-submit">기록</button>
      </div>
      <div id="memory-display" class="memory-container"></div>
    </section>

    <section id="memory-distortion" class="interactive-section">
      <div class="distortion-controls">
        <div class="slider-container">
          <label>기억 왜곡 강도</label>
          <input type="range" id="distortion-slider" min="0" max="100" value="50">
        </div>
        <button id="distort-memories">왜곡</button>
      </div>
      <div id="distorted-memories" class="memory-container"></div>
    </section>

    <section id="memory-extraction" class="interactive-section">
      <div class="extraction-zone">
        <button id="random-memory">무작위 기억 추출</button>
        <div id="extracted-memory" class="memory-display"></div>
      </div>
    </section>

    <section id="memory-synthesis" class="interactive-section">
      <div class="synthesis-controls">
        <button id="synthesize-memories">기억 재구성</button>
        <div id="synthesized-memory" class="memory-container"></div>
      </div>
    </section>
  </div>

  <div class="waves">
    <div class="wave"></div>
    <div class="wave"></div>
    <div class="wave"></div>
  </div>

  <script>
    class MemorySystem {
      constructor() {
        this.memories = [];
        this.initializeEventListeners();
      }

      initializeEventListeners() {
        document.getElementById('memory-submit').addEventListener('click', () => this.inputMemory());
        document.getElementById('distort-memories').addEventListener('click', () => this.distortMemories());
        document.getElementById('random-memory').addEventListener('click', () => this.extractRandomMemory());
        document.getElementById('synthesize-memories').addEventListener('click', () => this.synthesizeMemories());
      }

      inputMemory() {
        const input = document.getElementById('memory-input-field');
        const memory = input.value.trim();
        if (memory) {
          this.memories.push(memory);
          this.updateMemoryDisplay();
          input.value = '';
        }
      }

      updateMemoryDisplay() {
        const display = document.getElementById('memory-display');
        display.innerHTML = this.memories.map((mem, index) => 
          `<div class="memory-item" data-index="${index}">${mem} 
            <span class="delete-memory">✖</span>
          </div>`
        ).join('');

        display.querySelectorAll('.delete-memory').forEach(del => {
          del.addEventListener('click', (e) => {
            const index = e.target.parentElement.dataset.index;
            this.memories.splice(index, 1);
            this.updateMemoryDisplay();
          });
        });
      }

      distortMemories() {
        const intensity = document.getElementById('distortion-slider').value;
        const distortedMemories = this.memories.map(memory => {
          const glitchFactor = Math.random() * (intensity / 100);
          return memory.split('').map(char => 
            Math.random() < glitchFactor ? this.glitchCharacter(char) : char
          ).join('');
        });

        const distortedDisplay = document.getElementById('distorted-memories');
        distortedDisplay.innerHTML = distortedMemories.map(mem => 
          `<div class="distorted-memory">${mem}</div>`
        ).join('');
      }

      glitchCharacter(char) {
        const glitchChars = '!@#$%^&*()_+{}|:"<>?`~';
        return Math.random() < 0.5 ? glitchChars[Math.floor(Math.random() * glitchChars.length)] : char;
      }

      extractRandomMemory() {
        if (this.memories.length > 0) {
          const randomIndex = Math.floor(Math.random() * this.memories.length);
          const extractedMemory = document.getElementById('extracted-memory');
          extractedMemory.textContent = this.memories[randomIndex];
        }
      }

      synthesizeMemories() {
        if (this.memories.length > 1) {
          const synthesizedMemory = this.memories
            .sort(() => 0.5 - Math.random())
            .slice(0, 2)
            .join(' + ');

          const synthesizedDisplay = document.getElementById('synthesized-memory');
          synthesizedDisplay.textContent = synthesizedMemory;
        }
      }
    }

    new MemorySystem();
  </script>
</body>
</html>
